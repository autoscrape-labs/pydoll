
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pydoll.tech/docs/deep-dive/network/network-fundamentals/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../http-proxies/">
      
      
      <link rel="icon" href="../../../resources/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Network Fundamentals - Pydoll - Async Web Automation Library</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../resources/stylesheets/termynal.css">
    
      <link rel="stylesheet" href="../../../resources/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#network-fundamentals" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Pydoll - Async Web Automation Library" class="md-header__button md-logo" aria-label="Pydoll - Async Web Automation Library" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 15H6l7-14v8h5l-7 14z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydoll - Async Web Automation Library
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Network Fundamentals
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Dark Mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark Mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Light Mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light Mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/docs/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/docs/pt/" hreflang="pt" class="md-select__link">
              Português (BR)
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/docs/zh/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/autoscrape-labs/pydoll" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    autoscrape-labs/pydoll
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Pydoll

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../features/" class="md-tabs__link">
          
  
  
    
  
  Features

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Deep Dive

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api/" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Pydoll - Async Web Automation Library" class="md-nav__button md-logo" aria-label="Pydoll - Async Web Automation Library" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 15H6l7-14v8h5l-7 14z"/></svg>

    </a>
    Pydoll - Async Web Automation Library
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/autoscrape-labs/pydoll" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    autoscrape-labs/pydoll
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydoll
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../features/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/core-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/element-finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Element Finding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Automation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Automation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/automation/human-interactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Human-Like Interactions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/automation/keyboard-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Keyboard Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/automation/file-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/automation/iframes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IFrames
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/automation/screenshots-and-pdfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Screenshots & PDF
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/network/monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/network/interception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Request Interception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/network/http-requests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser-Context HTTP Requests
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Browser Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Browser Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/browser-management/tabs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-Tab Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/browser-management/contexts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser Contexts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/browser-management/cookies-sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cookies & Sessions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/configuration/browser-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/configuration/browser-preferences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser Preferences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/configuration/proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/advanced/behavioral-captcha-bypass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Behavioral Captcha Bypass
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/advanced/event-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/advanced/remote-connections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Connections
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Deep Dive
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Deep Dive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fundamentals/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Core Fundamentals
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Core Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/cdp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chrome DevTools Protocol
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/connection-layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connection Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/typing-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Type System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../architecture/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Internal Architecture
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Internal Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/browser-domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser Domain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/tab-domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tab Domain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/webelement-domain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebElement Domain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/find-elements-mixin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FindElements Mixin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/event-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/browser-requests-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser Requests Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Network & Security
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Network & Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Network Fundamentals
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Network Fundamentals
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-the-network-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction: The Network Stack
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction: The Network Stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-osi-model-context" class="md-nav__link">
    <span class="md-ellipsis">
      The OSI Model Context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The OSI Model Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layer-by-layer-breakdown" class="md-nav__link">
    <span class="md-ellipsis">
      Layer-by-Layer Breakdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-layer-positioning-matters-for-proxies" class="md-nav__link">
    <span class="md-ellipsis">
      Why Layer Positioning Matters for Proxies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#practical-implication-the-layer-leak-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Implication: The "Layer Leak" Problem
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-vs-udp-transport-layer-protocols" class="md-nav__link">
    <span class="md-ellipsis">
      TCP vs UDP: Transport Layer Protocols
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TCP vs UDP: Transport Layer Protocols">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-fundamental-difference" class="md-nav__link">
    <span class="md-ellipsis">
      The Fundamental Difference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-matters-for-proxies-and-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Why This Matters for Proxies and Automation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-three-way-handshake-establishing-connections" class="md-nav__link">
    <span class="md-ellipsis">
      TCP Three-Way Handshake: Establishing Connections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp-characteristics-speed-without-guarantees" class="md-nav__link">
    <span class="md-ellipsis">
      UDP Characteristics: Speed Without Guarantees
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webrtc-and-ip-leakage" class="md-nav__link">
    <span class="md-ellipsis">
      WebRTC and IP Leakage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WebRTC and IP Leakage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-webrtc-leaks-your-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Why WebRTC Leaks Your IP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-webrtc-establishes-connections-the-ice-process" class="md-nav__link">
    <span class="md-ellipsis">
      How WebRTC Establishes Connections: The ICE Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ice-candidate-types-what-gets-leaked" class="md-nav__link">
    <span class="md-ellipsis">
      ICE Candidate Types: What Gets Leaked
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stun-protocol-the-ip-discovery-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      STUN Protocol: The IP Discovery Mechanism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-proxies-cant-stop-webrtc-leaks" class="md-nav__link">
    <span class="md-ellipsis">
      Why Proxies Can't Stop WebRTC Leaks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preventing-webrtc-leaks-in-pydoll" class="md-nav__link">
    <span class="md-ellipsis">
      Preventing WebRTC Leaks in Pydoll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-for-webrtc-leaks" class="md-nav__link">
    <span class="md-ellipsis">
      Testing for WebRTC Leaks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-webrtc-leak-detection-by-websites" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: WebRTC Leak Detection by Websites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-and-further-reading" class="md-nav__link">
    <span class="md-ellipsis">
      Summary and Further Reading
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http-proxies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP/HTTPS Proxies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../socks-proxies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SOCKS Proxies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../proxy-detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Detection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build-proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Proxy Servers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../proxy-legal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legal & Ethical
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fingerprinting/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Fingerprinting
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Fingerprinting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fingerprinting/network-fingerprinting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Fingerprinting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fingerprinting/browser-fingerprinting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser Fingerprinting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fingerprinting/behavioral-fingerprinting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Behavioral Fingerprinting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fingerprinting/evasion-techniques/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evasion Techniques
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guides/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Practical Guides
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Practical Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/selectors-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSS Selectors vs XPath
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Browser
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Browser
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/browser/chrome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chrome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/browser/edge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Edge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/browser/options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/browser/tab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/browser/requests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Requests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/browser/managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Elements
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Elements
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/elements/web_element/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebElement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/elements/mixins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mixins
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Connection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Connection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/connection/connection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connection Handler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/connection/managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/commands/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/browser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/dom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DOM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/input/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Page
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/runtime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/target/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Target
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/commands/fetch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fetch
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Protocol
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/browser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/dom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DOM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/fetch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fetch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/input/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Page
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/runtime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/protocol/target/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Target
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/core/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/core/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/core/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-the-network-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction: The Network Stack
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction: The Network Stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-osi-model-context" class="md-nav__link">
    <span class="md-ellipsis">
      The OSI Model Context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The OSI Model Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layer-by-layer-breakdown" class="md-nav__link">
    <span class="md-ellipsis">
      Layer-by-Layer Breakdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-layer-positioning-matters-for-proxies" class="md-nav__link">
    <span class="md-ellipsis">
      Why Layer Positioning Matters for Proxies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#practical-implication-the-layer-leak-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Implication: The "Layer Leak" Problem
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-vs-udp-transport-layer-protocols" class="md-nav__link">
    <span class="md-ellipsis">
      TCP vs UDP: Transport Layer Protocols
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TCP vs UDP: Transport Layer Protocols">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-fundamental-difference" class="md-nav__link">
    <span class="md-ellipsis">
      The Fundamental Difference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-matters-for-proxies-and-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Why This Matters for Proxies and Automation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-three-way-handshake-establishing-connections" class="md-nav__link">
    <span class="md-ellipsis">
      TCP Three-Way Handshake: Establishing Connections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp-characteristics-speed-without-guarantees" class="md-nav__link">
    <span class="md-ellipsis">
      UDP Characteristics: Speed Without Guarantees
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webrtc-and-ip-leakage" class="md-nav__link">
    <span class="md-ellipsis">
      WebRTC and IP Leakage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WebRTC and IP Leakage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-webrtc-leaks-your-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Why WebRTC Leaks Your IP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-webrtc-establishes-connections-the-ice-process" class="md-nav__link">
    <span class="md-ellipsis">
      How WebRTC Establishes Connections: The ICE Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ice-candidate-types-what-gets-leaked" class="md-nav__link">
    <span class="md-ellipsis">
      ICE Candidate Types: What Gets Leaked
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stun-protocol-the-ip-discovery-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      STUN Protocol: The IP Discovery Mechanism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-proxies-cant-stop-webrtc-leaks" class="md-nav__link">
    <span class="md-ellipsis">
      Why Proxies Can't Stop WebRTC Leaks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preventing-webrtc-leaks-in-pydoll" class="md-nav__link">
    <span class="md-ellipsis">
      Preventing WebRTC Leaks in Pydoll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-for-webrtc-leaks" class="md-nav__link">
    <span class="md-ellipsis">
      Testing for WebRTC Leaks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-webrtc-leak-detection-by-websites" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced: WebRTC Leak Detection by Websites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-and-further-reading" class="md-nav__link">
    <span class="md-ellipsis">
      Summary and Further Reading
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="network-fundamentals">Network Fundamentals</h1>
<p>This document covers the foundational network protocols that power the internet and how they expose or protect your identity in automation scenarios. Understanding TCP, UDP, the OSI model, and WebRTC is <strong>essential</strong> before diving into proxy protocols.</p>
<div class="admonition info">
<p class="admonition-title">Module Navigation</p>
<ul>
<li><strong><a href="../">← Network &amp; Security Overview</a></strong> - Module introduction and learning path</li>
<li><strong><a href="../http-proxies/">→ HTTP/HTTPS Proxies</a></strong> - Application-layer proxying</li>
<li><strong><a href="../socks-proxies/">→ SOCKS Proxies</a></strong> - Session-layer proxying</li>
</ul>
<p>For practical Pydoll usage, see <strong><a href="../../../features/configuration/proxy/">Proxy Configuration</a></strong> and <strong><a href="../../../features/configuration/browser-options/">Browser Options</a></strong>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Foundation First</p>
<p>This is <strong>prerequisite knowledge</strong> for understanding proxy protocols. Without grasping these fundamentals, proxy configuration becomes trial-and-error guesswork.</p>
</div>
<h2 id="introduction-the-network-stack">Introduction: The Network Stack</h2>
<p>Every HTTP request your browser makes (every proxy connection, every WebSocket message) travels through a <strong>layered network stack</strong>. Each layer has specific responsibilities, protocols, and security implications.</p>
<p><strong>Why this matters for automation:</strong></p>
<ul>
<li>Proxies operate at <strong>different layers</strong>, each with different capabilities</li>
<li>Network characteristics at lower layers can <strong>fingerprint</strong> your real system (even through proxies)</li>
<li>Understanding the stack reveals <strong>where identity leaks occur</strong> and how to prevent them</li>
</ul>
<p>Before diving into proxies, we need to understand the network stack they operate within. This isn't abstract theory. Every concept here has <strong>direct implications</strong> for stealth, performance, and reliability in browser automation.</p>
<h3 id="the-osi-model-context">The OSI Model Context</h3>
<p>The OSI (Open Systems Interconnection) model, developed by the International Organization for Standardization (ISO) in 1984, provides a <strong>conceptual framework</strong> for understanding how network protocols interact. While real-world networks primarily use the TCP/IP model (which predates OSI), understanding OSI layers helps conceptualize <strong>where proxies operate</strong> and <strong>what they can inspect or modify</strong>.</p>
<pre class="mermaid"><code>graph TD
    L7[Layer 7: Application - HTTP, FTP, SMTP]
    L6[Layer 6: Presentation - SSL/TLS, Encryption]
    L5[Layer 5: Session - SOCKS]
    L4[Layer 4: Transport - TCP, UDP]
    L3[Layer 3: Network - IP, ICMP]
    L2[Layer 2: Data Link - Ethernet, WiFi]
    L1[Layer 1: Physical - Cables, Radio Waves]

    L7 --&gt; L6 --&gt; L5 --&gt; L4 --&gt; L3 --&gt; L2 --&gt; L1</code></pre>
<h4 id="layer-by-layer-breakdown">Layer-by-Layer Breakdown</h4>
<p><strong>Layer 7 (Application)</strong>: Where user-facing protocols live. HTTP, HTTPS, FTP, SMTP, DNS all operate here. This layer contains the <strong>actual data</strong> your application cares about: HTML documents, JSON responses, file transfers. HTTP proxies operate at this layer, giving them <strong>full visibility</strong> into request/response content.</p>
<p><strong>Layer 6 (Presentation)</strong>: Handles data format translation, encryption, and compression. SSL/TLS encryption occurs here (though TLS is often considered to straddle Layers 5-6). This is where <strong>HTTPS encryption</strong> happens, encrypting Layer 7 data before passing it down to Layer 5.</p>
<p><strong>Layer 5 (Session)</strong>: Manages connections between applications. SOCKS proxies operate here, below the application layer but above transport. This position makes SOCKS <strong>protocol-agnostic</strong>, it can proxy any Layer 7 protocol (HTTP, FTP, SMTP, SSH) without understanding their specifics.</p>
<p><strong>Layer 4 (Transport)</strong>: Provides end-to-end data delivery. TCP (connection-oriented, reliable) and UDP (connectionless, fast) are the dominant protocols. This layer handles <strong>port numbers</strong>, <strong>flow control</strong>, and <strong>error correction</strong>. All proxies ultimately rely on Layer 4 for actual data transmission.</p>
<p><strong>Layer 3 (Network)</strong>: Handles routing and addressing between networks. IP (Internet Protocol) operates here, managing <strong>IP addresses</strong> and <strong>routing decisions</strong>. This is where your <strong>real IP address</strong> lives, and where proxies aim to substitute it.</p>
<p><strong>Layer 2 (Data Link)</strong>: Manages communication on the same physical network segment. Ethernet, Wi-Fi, and PPP operate here, handling <strong>MAC addresses</strong> and <strong>frame transmission</strong>. Network fingerprinting at this layer can reveal <strong>physical network characteristics</strong>.</p>
<p><strong>Layer 1 (Physical)</strong>: The actual hardware (cables, radio waves, voltage levels). While rarely relevant to software, physical-layer characteristics can be measured (signal timing, electrical properties) for <strong>advanced fingerprinting</strong>.</p>
<div class="admonition tip">
<p class="admonition-title">OSI vs TCP/IP Models</p>
<p>The <strong>TCP/IP model</strong> (4 layers: Link, Internet, Transport, Application) is what networks actually use. OSI (7 layers) is a <strong>teaching tool</strong> and reference model. When people say "Layer 7 proxy," they're using OSI terminology, but the actual implementation uses TCP/IP.</p>
</div>
<h4 id="why-layer-positioning-matters-for-proxies">Why Layer Positioning Matters for Proxies</h4>
<p>The layer where a proxy operates determines its <strong>capabilities</strong> and <strong>limitations</strong>:</p>
<p><strong>HTTP/HTTPS Proxies (Layer 7 - Application)</strong>:</p>
<ul>
<li><strong>Full HTTP visibility</strong>: Can read/modify URLs, headers, cookies, request bodies</li>
<li><strong>Intelligent caching</strong>: Can cache responses based on HTTP semantics</li>
<li><strong>Content filtering</strong>: Can block specific URLs or keywords</li>
<li><strong>Authentication integration</strong>: Can add authentication headers</li>
<li><strong>HTTP-only limitation</strong>: Cannot proxy FTP, SMTP, SSH, or other protocols</li>
<li><strong>TLS termination required</strong>: Must decrypt HTTPS to inspect content</li>
</ul>
<p><strong>SOCKS Proxies (Layer 5 - Session)</strong>:</p>
<ul>
<li><strong>Protocol-agnostic</strong>: Can proxy any Layer 7 protocol (HTTP, FTP, SSH, etc.)</li>
<li><strong>No TLS termination</strong>: HTTPS passes through encrypted (end-to-end security)</li>
<li><strong>UDP support</strong> (SOCKS5): Can proxy DNS, VoIP, gaming protocols</li>
<li><strong>No content visibility</strong>: Cannot inspect or modify application-layer data</li>
<li><strong>No intelligent caching</strong>: Doesn't understand HTTP semantics</li>
<li><strong>No URL-based filtering</strong>: Cannot block specific URLs, only IP:port combinations</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">The Fundamental Tradeoff</p>
<p><strong>Higher layers</strong> (Layer 7) = More control, less flexibility
<strong>Lower layers</strong> (Layer 5) = Less control, more flexibility</p>
<p>Choose based on your needs: HTTP proxy for <strong>content control</strong>, SOCKS proxy for <strong>protocol flexibility</strong> and <strong>end-to-end encryption</strong>.</p>
</div>
<h4 id="practical-implication-the-layer-leak-problem">Practical Implication: The "Layer Leak" Problem</h4>
<p>Understanding layers reveals a critical security issue: <strong>characteristics leak across layers</strong>.</p>
<p>Even with a perfect Layer 7 proxy (HTTP), lower-layer characteristics can expose your real identity:</p>
<ul>
<li><strong>Layer 4 (TCP)</strong>: Your OS's TCP stack has a unique "fingerprint" (window size, options, TTL)</li>
<li><strong>Layer 3 (Network)</strong>: IP header fields (TTL, fragmentation) reveal OS and network topology</li>
<li><strong>Layer 2 (Data Link)</strong>: MAC address vendor reveals hardware manufacturer</li>
</ul>
<p><strong>Example</strong>: You configure a proxy to show "Windows 10" User-Agent, but your <strong>actual Linux system's TCP fingerprint</strong> (Layer 4) contradicts this. Instant bot detection.</p>
<p>This is why <strong>network-level fingerprinting</strong> (covered in <a href="../../fingerprinting/network-fingerprinting/">Network Fingerprinting</a>) is so dangerous: it operates <strong>below the proxy layer</strong>, exposing your real system even when application-layer proxying is perfect.</p>
<h3 id="tcp-vs-udp-transport-layer-protocols">TCP vs UDP: Transport Layer Protocols</h3>
<p>At Layer 4 (Transport), two fundamentally different protocols dominate internet communication: <strong>TCP (Transmission Control Protocol)</strong> and <strong>UDP (User Datagram Protocol)</strong>. They represent opposite design philosophies: reliability vs speed, overhead vs efficiency.</p>
<h4 id="the-fundamental-difference">The Fundamental Difference</h4>
<p><strong>TCP</strong> is like a phone call: you establish a connection, verify the other party is listening, exchange data reliably, then hang up. Every byte is acknowledged, ordered, and guaranteed to arrive.</p>
<p><strong>UDP</strong> is like shouting across a crowded room: you send your message and hope it arrives. No guarantees, no acknowledgments, no connection setup. Just raw speed.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Connection</strong></td>
<td>Connection-oriented (handshake required)</td>
<td>Connectionless (no handshake)</td>
</tr>
<tr>
<td><strong>Reliability</strong></td>
<td>Guaranteed delivery, ordered packets</td>
<td>Best-effort delivery, packets may be lost</td>
</tr>
<tr>
<td><strong>Speed</strong></td>
<td>Slower (overhead from reliability mechanisms)</td>
<td>Faster (minimal overhead)</td>
</tr>
<tr>
<td><strong>Use Cases</strong></td>
<td>Web browsing, file transfer, email</td>
<td>Video streaming, DNS queries, gaming</td>
</tr>
<tr>
<td><strong>Header Size</strong></td>
<td>20 bytes minimum (up to 60 with options)</td>
<td>8 bytes fixed</td>
</tr>
<tr>
<td><strong>Flow Control</strong></td>
<td>Yes (sliding window, receiver-driven)</td>
<td>No (sender transmits at will)</td>
</tr>
<tr>
<td><strong>Congestion Control</strong></td>
<td>Yes (slows down when network is congested)</td>
<td>No (application's responsibility)</td>
</tr>
<tr>
<td><strong>Error Checking</strong></td>
<td>Extensive (checksum + acknowledgments)</td>
<td>Basic (checksum only, optional discard)</td>
</tr>
<tr>
<td><strong>Ordering</strong></td>
<td>Packets reordered if received out-of-sequence</td>
<td>No ordering, packets delivered as received</td>
</tr>
<tr>
<td><strong>Retransmission</strong></td>
<td>Automatic (lost packets retransmitted)</td>
<td>None (application must handle)</td>
</tr>
</tbody>
</table>
<h4 id="why-this-matters-for-proxies-and-automation">Why This Matters for Proxies and Automation</h4>
<p><strong>All proxy protocols use TCP</strong>. HTTP proxies, HTTPS proxies, SOCKS4, and SOCKS5 all rely on TCP for their control channel because:</p>
<ol>
<li><strong>Reliability</strong>: Proxy authentication and command exchange require guaranteed delivery</li>
<li><strong>Ordering</strong>: Proxy protocols have strict command sequences (handshake → auth → data)</li>
<li><strong>Connection state</strong>: Proxies need persistent connections to track clients</li>
</ol>
<p>However, <strong>SOCKS5 can proxy UDP traffic</strong> (unlike SOCKS4 or HTTP proxies), making it essential for:</p>
<ul>
<li><strong>DNS queries</strong>: Fast domain resolution without TCP overhead</li>
<li><strong>WebRTC</strong>: Real-time audio/video (which uses UDP for low latency)</li>
<li><strong>VoIP</strong>: Voice communication requires speed over reliability</li>
<li><strong>Gaming protocols</strong>: Low-latency game state updates</li>
</ul>
<div class="admonition danger">
<p class="admonition-title">UDP = IP Leakage Risk</p>
<p>Most browser connections use TCP (HTTP, WebSocket, etc.). But WebRTC uses <strong>UDP directly</strong>, bypassing the browser's network stack and proxy configuration. This is the <strong>#1 cause of IP leakage</strong> in proxied browser automation. Your real IP leaks through UDP while TCP traffic goes through the proxy.</p>
</div>
<h4 id="tcp-three-way-handshake-establishing-connections">TCP Three-Way Handshake: Establishing Connections</h4>
<p>Before any data can be transmitted, TCP requires a <strong>three-way handshake</strong> to establish a connection. This negotiation synchronizes sequence numbers, agrees on window sizes, and establishes connection state on both ends.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant Client
    participant Server

    Client-&gt;&gt;Server: SYN (Synchronize, seq=x)
    Note over Client,Server: Client requests connection

    Server-&gt;&gt;Client: SYN-ACK (seq=y, ack=x+1)
    Note over Client,Server: Server acknowledges and sends its own SYN

    Client-&gt;&gt;Server: ACK (ack=y+1)
    Note over Client,Server: Connection established

    Note over Client,Server: Data transfer begins</code></pre>
<p><strong>Step-by-step breakdown:</strong></p>
<p><strong>1. SYN (Synchronize)</strong>: Client initiates connection</p>
<ul>
<li>Client selects a <strong>random Initial Sequence Number (ISN)</strong> (e.g., <code>seq=1000</code>)</li>
<li>Sends SYN packet with this ISN to server</li>
<li>TCP options negotiated: window size, Maximum Segment Size (MSS), timestamps, SACK support</li>
</ul>
<p><strong>2. SYN-ACK (Synchronize-Acknowledge)</strong>: Server responds</p>
<ul>
<li>Server selects its own <strong>random ISN</strong> (e.g., <code>seq=5000</code>)</li>
<li>Acknowledges client's ISN: <code>ack=1001</code> (client's ISN + 1)</li>
<li>Sends both SYN (to establish server→client direction) and ACK (to confirm client→server direction)</li>
<li>Returns its own TCP options</li>
</ul>
<p><strong>3. ACK (Acknowledge)</strong>: Client confirms</p>
<ul>
<li>Client acknowledges server's ISN: <code>ack=5001</code> (server's ISN + 1)</li>
<li>Connection now <strong>established</strong> in both directions</li>
<li>Data transmission can begin</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Why Random ISN?</p>
<p>The ISN is randomized (not starting from 0) to prevent <strong>TCP hijacking attacks</strong>. If ISNs were predictable, an attacker could inject packets into an existing connection by guessing the sequence numbers. Modern systems use cryptographic randomness for ISN selection (RFC 6528).</p>
</div>
<p><strong>Security Implication: TCP Fingerprinting</strong></p>
<p>The TCP handshake reveals numerous characteristics that <strong>fingerprint your operating system</strong>:</p>
<ul>
<li><strong>Initial Window Size</strong>: Different OSes use different default values (Windows: 8192, Linux: 5840, macOS: 65535)</li>
<li><strong>TCP Options</strong>: Order and presence of options vary by OS (MSS, SACK, Timestamps, Window Scale)</li>
<li><strong>TTL (Time To Live)</strong>: Default values differ (Windows: 128, Linux: 64, macOS: 64)</li>
<li><strong>Window Scale Factor</strong>: Reveals buffer size preferences</li>
<li><strong>Timestamp Value</strong>: Timing patterns reveal system uptime and clock resolution</li>
</ul>
<p><strong>Example TCP handshake fingerprint (captured with Wireshark)</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Windows 10:
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    Window Size: 8192
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    MSS: 1460
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    Options: MSS, NOP, WS, NOP, NOP, SACK_PERM
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    TTL: 128
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>Linux (Ubuntu):
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    Window Size: 29200
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    MSS: 1460
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    Options: MSS, SACK_PERM, TS, NOP, WS
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    TTL: 64
</span></code></pre></div>
<p>These differences are <strong>burned into the kernel</strong>. A proxy cannot change them because they're set by your <strong>operating system</strong>, not your browser. This is how sophisticated detection systems identify you <strong>even through proxies</strong>.</p>
<div class="admonition warning">
<p class="admonition-title">Proxy Limitation</p>
<p>HTTP and SOCKS proxies operate <strong>above the TCP layer</strong>. They cannot modify TCP handshake characteristics. Your OS's TCP fingerprint is <strong>always exposed</strong> to the proxy server (and any network observers). Only <strong>VPN-level solutions</strong> or <strong>OS-level TCP stack spoofing</strong> can address this.</p>
</div>
<p><strong>Why TCP matters for proxies:</strong></p>
<ul>
<li><strong>Reliable proxy authentication</strong>: Credentials sent over TCP won't be lost</li>
<li><strong>Persistent connections</strong>: Single TCP connection can handle multiple HTTP requests (HTTP/1.1 keep-alive, HTTP/2)</li>
<li><strong>Ordered delivery</strong>: Proxy commands execute in sequence (crucial for authentication flows)</li>
<li><strong>Fingerprinting exposure</strong>: TCP handshake characteristics reveal your real OS</li>
</ul>
<h4 id="udp-characteristics-speed-without-guarantees">UDP Characteristics: Speed Without Guarantees</h4>
<p>Unlike TCP's reliable, connection-oriented approach, UDP is a <strong>"fire-and-forget" protocol</strong>. It trades reliability for <strong>minimal latency and overhead</strong>, making it ideal for real-time applications where speed matters more than perfect delivery.</p>
<p><strong>UDP Packet Structure (RFC 768)</strong>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># UDP datagram structure (actual header format)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="s1">&#39;source_port&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>        <span class="c1"># 16 bits - optional (0 = no response expected)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="s1">&#39;destination_port&#39;</span><span class="p">:</span> <span class="mi">53</span><span class="p">,</span>       <span class="c1"># 16 bits - required (application identifier)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>                 <span class="c1"># 16 bits - datagram size (header + data)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="s1">&#39;checksum&#39;</span><span class="p">:</span> <span class="mh">0x1234</span><span class="p">,</span>          <span class="c1"># 16 bits - optional in IPv4, mandatory in IPv6</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;...&#39;</span>               <span class="c1"># Variable - application data</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">}</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1"># Total header: 8 bytes (vs TCP&#39;s 20-60 bytes)</span>
</span></code></pre></div>
<p><strong>Key UDP Characteristics:</strong></p>
<ol>
<li>
<p><strong>No Connection Establishment</strong>: No handshake, no state. Just send the packet and hope it arrives.</p>
</li>
<li>
<p><strong>No Reliability</strong>: Packets can be lost, duplicated, or arrive out of order. Application must handle these scenarios.</p>
</li>
<li>
<p><strong>No Flow Control</strong>: Sender transmits as fast as it wants. No mechanism to slow down for receiver capacity.</p>
</li>
<li>
<p><strong>No Congestion Control</strong>: UDP doesn't detect or respond to network congestion. Can overwhelm networks.</p>
</li>
<li>
<p><strong>Minimal Header</strong>: Only 8 bytes vs TCP's 20-60 bytes. Lower overhead means more bandwidth for data.</p>
</li>
<li>
<p><strong>Port-Based Multiplexing</strong>: Like TCP, uses port numbers to identify applications (DNS=53, WebRTC=dynamic)</p>
</li>
</ol>
<p><strong>When to Use UDP:</strong></p>
<p><strong>Good use cases:</strong>
- <strong>Real-time communication</strong>: Voice/video calls (WebRTC, VoIP) where old data is useless
- <strong>Gaming</strong>: Low-latency game state updates where speed &gt; accuracy
- <strong>Streaming</strong>: Video/audio where occasional frame loss is acceptable
- <strong>DNS queries</strong>: Small request/response where retransmission is handled by application
- <strong>Network discovery</strong>: Broadcast/multicast protocols (DHCP, mDNS)</p>
<p><strong>Poor use cases:</strong>
- <strong>File transfer</strong>: Would require application-level reliability (so just use TCP)
- <strong>Web browsing</strong>: Needs ordered, reliable delivery (HTTP/3 over QUIC is exception)
- <strong>Email, databases</strong>: Absolutely require reliability</p>
<p><strong>UDP and DNS: A Critical Example</strong></p>
<p>DNS (Domain Name System) uses UDP because:</p>
<ul>
<li><strong>Small messages</strong>: DNS queries and responses typically fit in a single packet (&lt;512 bytes)</li>
<li><strong>Fast resolution</strong>: No handshake overhead means faster lookups</li>
<li><strong>Application-level retry</strong>: DNS client retries if no response within timeout</li>
<li><strong>Widespread</strong>: Billions of DNS queries per second worldwide</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Typical DNS query over UDP</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">Source</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">54321</span> <span class="p">(</span><span class="n">random</span> <span class="n">ephemeral</span> <span class="n">port</span><span class="p">)</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">Destination</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">53</span> <span class="p">(</span><span class="n">DNS</span> <span class="n">standard</span> <span class="n">port</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">Length</span><span class="p">:</span> <span class="mi">29</span> <span class="nb">bytes</span> <span class="p">(</span><span class="mi">8</span><span class="o">-</span><span class="n">byte</span> <span class="n">header</span> <span class="o">+</span> <span class="mi">21</span><span class="o">-</span><span class="n">byte</span> <span class="n">query</span><span class="p">)</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">Checksum</span><span class="p">:</span> <span class="mh">0x1a2b</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">Data</span><span class="p">:</span> <span class="s2">&quot;google.com A?&quot;</span> <span class="p">(</span><span class="n">Query</span> <span class="k">for</span> <span class="n">A</span> <span class="n">record</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Why UDP matters for browser automation:</strong></p>
<ul>
<li><strong>WebRTC uses UDP</strong> for real-time audio/video (can't be proxied by HTTP proxies)</li>
<li><strong>DNS queries use UDP</strong> (can leak DNS requests if not proxied)</li>
<li><strong>SOCKS5 supports UDP</strong> (unlike SOCKS4 or HTTP proxies)</li>
<li><strong>UDP bypasses proxies</strong> unless explicitly configured</li>
<li><strong>No sequence numbers</strong> means no fingerprinting via ISN (unlike TCP)</li>
</ul>
<div class="admonition danger">
<p class="admonition-title">The WebRTC UDP Leak</p>
<p>Here's the critical problem: Your browser makes <strong>DNS queries over UDP</strong> and <strong>WebRTC connections over UDP</strong>. Most proxy configurations only cover <strong>TCP traffic</strong> (HTTP, HTTPS, WebSocket).</p>
<p>Result: Your TCP traffic (web pages, API calls) goes through the proxy with the proxy's IP, but your <strong>UDP traffic leaks your real IP directly</strong>.</p>
<p>This is why even with a proxy, websites can discover your real IP via WebRTC. It's using <strong>UDP directly</strong>, bypassing your proxy entirely.</p>
</div>
<p><strong>UDP Proxy Support by Protocol:</strong></p>
<table>
<thead>
<tr>
<th>Proxy Type</th>
<th>UDP Support</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP Proxy</td>
<td>No</td>
<td>Only proxies TCP-based HTTP/HTTPS</td>
</tr>
<tr>
<td>HTTPS Proxy (CONNECT)</td>
<td>No</td>
<td>CONNECT method only establishes TCP tunnel</td>
</tr>
<tr>
<td>SOCKS4</td>
<td>No</td>
<td>TCP-only protocol</td>
</tr>
<tr>
<td>SOCKS5</td>
<td>Yes</td>
<td>Supports UDP relay via <code>UDP ASSOCIATE</code> command</td>
</tr>
<tr>
<td>VPN</td>
<td>Yes</td>
<td>Tunnels all IP traffic (TCP and UDP)</td>
</tr>
</tbody>
</table>
<p><strong>Practical Implication:</strong></p>
<p>For <strong>true anonymity</strong> in browser automation, you need <strong>either</strong>:
1. <strong>SOCKS5 proxy</strong> (to proxy UDP) + WebRTC configured to use SOCKS5
2. <strong>Disable WebRTC entirely</strong> (prevents UDP leaks but breaks video conferencing)
3. <strong>VPN</strong> (tunnels all traffic, TCP and UDP)
4. <strong>Browser flags</strong>: <code>--force-webrtc-ip-handling-policy=disable_non_proxied_udp</code></p>
<div class="admonition tip">
<p class="admonition-title">UDP Fingerprinting</p>
<p>Unlike TCP, UDP has no handshake and minimal header fields, making it <strong>harder to fingerprint</strong>. However, <strong>timing characteristics</strong> (packet intervals, jitter) and <strong>payload patterns</strong> can still reveal application behavior.</p>
</div>
<h2 id="webrtc-and-ip-leakage">WebRTC and IP Leakage</h2>
<p>WebRTC (Web Real-Time Communication) is a browser API standardized by the W3C that enables <strong>peer-to-peer</strong> audio, video, and data communication directly between browsers, without requiring plugins or intermediary servers. While powerful for real-time applications, WebRTC is the <strong>single biggest source of IP leakage</strong> in proxied browser automation.</p>
<h3 id="why-webrtc-leaks-your-ip">Why WebRTC Leaks Your IP</h3>
<p>WebRTC was designed for <strong>direct peer-to-peer connections</strong>, optimizing for low latency over privacy. To establish P2P connections, WebRTC must discover your <strong>real public IP address</strong> and share it with the remote peer, even if your browser is configured to use a proxy.</p>
<p><strong>The fundamental problem:</strong>
1. Your browser uses a proxy for HTTP/HTTPS (TCP traffic)
2. WebRTC uses <strong>STUN servers</strong> to discover your real public IP (UDP traffic)
3. STUN queries <strong>bypass the proxy</strong> (because they're UDP and most proxies only handle TCP)
4. Your real IP is discovered and <strong>shared with remote peers</strong>
5. JavaScript can read these "ICE candidates" and <strong>leak your real IP to websites</strong></p>
<div class="admonition danger">
<p class="admonition-title">Severity of WebRTC Leaks</p>
<p>Even with:</p>
<ul>
<li>HTTP proxy configured correctly</li>
<li>HTTPS proxy working</li>
<li>DNS queries proxied</li>
<li>User-Agent spoofed</li>
<li>Canvas fingerprinting mitigated</li>
</ul>
<p><strong>WebRTC can still leak your real IP in milliseconds</strong>. This is because WebRTC operates <strong>below the browser's proxy layer</strong>, directly interfacing with the OS network stack.</p>
</div>
<h3 id="how-webrtc-establishes-connections-the-ice-process">How WebRTC Establishes Connections: The ICE Process</h3>
<p>WebRTC uses <strong>ICE (Interactive Connectivity Establishment)</strong>, defined in RFC 8445, to discover possible connection paths and select the best one. This process inherently reveals your network topology.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant Browser
    participant STUN as STUN Server
    participant TURN as TURN Relay
    participant Peer as Remote Peer

    Note over Browser: WebRTC connection initiated

    Browser-&gt;&gt;Browser: Gather local IP addresses&lt;br/&gt;(LAN interfaces)
    Note over Browser: Local candidate:&lt;br/&gt;192.168.1.100:54321

    Browser-&gt;&gt;STUN: STUN Binding Request (over UDP)
    Note over STUN: STUN server discovers public IP&lt;br/&gt;(bypasses proxy!)
    STUN-&gt;&gt;Browser: STUN Response with real public IP
    Note over Browser: Server reflexive candidate:&lt;br/&gt;203.0.113.45:54321

    Browser-&gt;&gt;TURN: Allocate relay (if needed)
    TURN-&gt;&gt;Browser: Relay address assigned
    Note over Browser: Relay candidate:&lt;br/&gt;198.51.100.10:61234

    Browser-&gt;&gt;Peer: Send all ICE candidates&lt;br/&gt;(local + public + relay)
    Note over Peer: Now knows your:&lt;br/&gt;- LAN IP&lt;br/&gt;- Real public IP&lt;br/&gt;- Relay address

    Peer-&gt;&gt;Browser: Send ICE candidates

    Note over Browser,Peer: ICE negotiation: try direct P2P first

    alt Direct P2P succeeds
        Browser&lt;&lt;-&gt;&gt;Peer: Direct connection (bypasses proxy entirely!)
    else Direct P2P fails (firewall/NAT)
        Browser-&gt;&gt;TURN: Use TURN relay
        TURN&lt;&lt;-&gt;&gt;Peer: Relayed connection
        Note over Browser,Peer: Higher latency, but works
    end</code></pre>
<h3 id="ice-candidate-types-what-gets-leaked">ICE Candidate Types: What Gets Leaked</h3>
<p>ICE discovers three types of "candidates" (possible connection endpoints):</p>
<p><strong>1. Host Candidates (Local LAN IP addresses)</strong></p>
<p>Your browser enumerates all local network interfaces and creates candidates for each:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// Example host candidates revealed by WebRTC</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nx">candidate</span><span class="o">:</span><span class="mf">1</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">UDP</span><span class="w"> </span><span class="mf">2130706431</span><span class="w"> </span><span class="mf">192.168.1.100</span><span class="w"> </span><span class="mf">54321</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="nx">host</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nx">candidate</span><span class="o">:</span><span class="mf">2</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">UDP</span><span class="w"> </span><span class="mf">2130706431</span><span class="w"> </span><span class="mf">10.0.0.5</span><span class="w"> </span><span class="mf">54322</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="nx">host</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nx">candidate</span><span class="o">:</span><span class="mf">3</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">UDP</span><span class="w"> </span><span class="mf">2130706431</span><span class="w"> </span><span class="mf">172.16.0.10</span><span class="w"> </span><span class="mf">54323</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="nx">host</span>
</span></code></pre></div>
<p><strong>What this reveals:</strong></p>
<ul>
<li>Your <strong>local IP address(es)</strong> on private networks</li>
<li>Your <strong>network topology</strong> (presence of VPN interfaces, VM bridges, etc.)</li>
<li><strong>Number of network interfaces</strong> (single Wi-Fi vs multiple ethernet/VPN)</li>
</ul>
<p>Even if you're behind NAT, this reveals your <strong>internal network structure</strong>.</p>
<p><strong>2. Server Reflexive Candidates (Public IP via STUN)</strong></p>
<p>Browser sends STUN request to public STUN server, which replies with your <strong>public IP address</strong> as seen from the internet:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// Server reflexive candidate (YOUR REAL PUBLIC IP!)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nx">candidate</span><span class="o">:</span><span class="mf">4</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">UDP</span><span class="w"> </span><span class="mf">1694498815</span><span class="w"> </span><span class="mf">203.0.113.45</span><span class="w"> </span><span class="mf">54321</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="nx">srflx</span><span class="w"> </span><span class="nx">raddr</span><span class="w"> </span><span class="mf">192.168.1.100</span><span class="w"> </span><span class="nx">rport</span><span class="w"> </span><span class="mf">54321</span>
</span></code></pre></div>
<p><strong>What this reveals:</strong></p>
<ul>
<li>Your <strong>real public IP address</strong> (the one you're trying to hide with a proxy!)</li>
<li>Your <strong>NAT type</strong> and external port mapping</li>
<li>Your <strong>ISP</strong> (via IP geolocation/WHOIS)</li>
</ul>
<p><strong>This is the leak</strong> everyone talks about: your proxy shows <code>198.51.100.5</code> but WebRTC reveals <code>203.0.113.45</code> (your real IP).</p>
<p><strong>3. Relay Candidates (TURN relay addresses)</strong></p>
<p>If direct P2P fails, browser allocates a relay address from a TURN server:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// Relay candidate (TURN server address)</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nx">candidate</span><span class="o">:</span><span class="mf">5</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">UDP</span><span class="w"> </span><span class="mf">16777215</span><span class="w"> </span><span class="mf">198.51.100.10</span><span class="w"> </span><span class="mf">61234</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="nx">relay</span><span class="w"> </span><span class="nx">raddr</span><span class="w"> </span><span class="mf">203.0.113.45</span><span class="w"> </span><span class="nx">rport</span><span class="w"> </span><span class="mf">54321</span>
</span></code></pre></div>
<p><strong>What this reveals:</strong></p>
<ul>
<li><strong>TURN server</strong> being used (may reveal your VoIP provider, etc.)</li>
<li><strong>Still contains your real IP</strong> in <code>raddr</code> (remote address) field</li>
</ul>
<h3 id="stun-protocol-the-ip-discovery-mechanism">STUN Protocol: The IP Discovery Mechanism</h3>
<p>STUN (Session Traversal Utilities for NAT), defined in RFC 5389, is a simple request-response protocol over UDP that discovers your public IP address by asking a server "what IP do you see me as?"</p>
<p><strong>STUN Message Structure</strong>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># STUN Binding Request (simplified)</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p">{</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="s1">&#39;message_type&#39;</span><span class="p">:</span> <span class="mh">0x0001</span><span class="p">,</span>  <span class="c1"># Binding Request</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="s1">&#39;message_length&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>      <span class="c1"># No additional attributes</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="s1">&#39;magic_cookie&#39;</span><span class="p">:</span> <span class="mh">0x2112A442</span><span class="p">,</span>  <span class="c1"># Fixed value (RFC 5389)</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="s1">&#39;transaction_id&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01\x02\x03</span><span class="s1">...</span><span class="se">\x0c</span><span class="s1">&#39;</span>  <span class="c1"># Random 12 bytes</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">}</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="c1"># Sent via UDP to STUN server (e.g., stun.l.google.com:19302)</span>
</span></code></pre></div>
<p><strong>STUN Binding Response</strong>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># STUN Binding Success Response</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="p">{</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="s1">&#39;message_type&#39;</span><span class="p">:</span> <span class="mh">0x0101</span><span class="p">,</span>  <span class="c1"># Binding Success Response</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="s1">&#39;message_length&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>     <span class="c1"># XOR-MAPPED-ADDRESS attribute</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="s1">&#39;magic_cookie&#39;</span><span class="p">:</span> <span class="mh">0x2112A442</span><span class="p">,</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="s1">&#39;transaction_id&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01\x02\x03</span><span class="s1">...</span><span class="se">\x0c</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># Same as request</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="s1">&#39;attributes&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>        <span class="s1">&#39;XOR-MAPPED-ADDRESS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>            <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">,</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">54321</span><span class="p">,</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>            <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="s1">&#39;203.0.113.45&#39;</span>  <span class="c1"># YOUR REAL PUBLIC IP!</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>        <span class="p">}</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span class="p">}</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Why XOR-MAPPED-ADDRESS?</strong>
The IP address is XOR'ed with the magic cookie and transaction ID for <strong>NAT compatibility</strong>. Some NAT devices incorrectly modify IP addresses in packet payloads, breaking STUN. XOR'ing obfuscates the IP, preventing NAT interference.</p>
<p><strong>Public STUN Servers</strong> (commonly used by browsers):</p>
<ul>
<li><code>stun.l.google.com:19302</code> (Google)</li>
<li><code>stun1.l.google.com:19302</code> (Google)</li>
<li><code>stun.services.mozilla.com</code> (Mozilla)</li>
<li><code>stun.stunprotocol.org:3478</code> (Open STUN server)</li>
</ul>
<h3 id="why-proxies-cant-stop-webrtc-leaks">Why Proxies Can't Stop WebRTC Leaks</h3>
<p><strong>1. UDP Protocol</strong>: WebRTC uses <strong>UDP</strong>, most proxies only handle <strong>TCP</strong></p>
<ul>
<li>HTTP proxies: TCP-only</li>
<li>HTTPS CONNECT: TCP-only tunnel</li>
<li>SOCKS4: TCP-only</li>
<li>Only <strong>SOCKS5</strong> supports UDP (but browser must be configured to use it)</li>
</ul>
<p><strong>2. Browser-Level Implementation</strong>: WebRTC is a <strong>browser API</strong>, not an HTTP feature</p>
<ul>
<li>Operates below HTTP layer</li>
<li>Directly accesses OS network stack</li>
<li>Bypasses proxy settings configured for HTTP/HTTPS</li>
</ul>
<p><strong>3. Direct OS Network Access</strong>: STUN queries go <strong>directly to the network interface</strong></p>
<ul>
<li>Browser's proxy settings don't apply to STUN</li>
<li>OS routing table determines path (not browser proxy config)</li>
<li>Only VPN-level routing can intercept</li>
</ul>
<p><strong>4. Multiple Interface Enumeration</strong>: WebRTC enumerates <strong>all</strong> network interfaces</p>
<ul>
<li>Physical ethernet, Wi-Fi, VPN adapters, VM bridges</li>
<li>Even interfaces not used for browsing</li>
<li>Leaks internal network topology</li>
</ul>
<p><strong>5. JavaScript Accessibility</strong>: Web pages can <strong>read ICE candidates</strong> via JavaScript</p>
<ul>
<li><code>RTCPeerConnection.onicecandidate</code> event</li>
<li>Extracts IP addresses from candidate strings</li>
<li>Sends your real IP to their server</li>
</ul>
<h3 id="preventing-webrtc-leaks-in-pydoll">Preventing WebRTC Leaks in Pydoll</h3>
<p>Pydoll provides multiple strategies for preventing WebRTC IP leaks:</p>
<p><strong>Method 1: Force WebRTC to Only Use Proxied Routes (Recommended)</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pydoll</span><span class="w"> </span><span class="kn">import</span> <span class="n">Chrome</span><span class="p">,</span> <span class="n">ChromiumOptions</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">options</span> <span class="o">=</span> <span class="n">ChromiumOptions</span><span class="p">()</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--force-webrtc-ip-handling-policy=disable_non_proxied_udp&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>What this does:</strong></p>
<ul>
<li>Disables UDP if no proxy supports it</li>
<li>Forces WebRTC to use <strong>TURN relays only</strong> (no direct P2P)</li>
<li>Prevents STUN queries to public servers</li>
<li><strong>Trade-off</strong>: Breaks direct P2P (higher latency for video calls)</li>
</ul>
<p><strong>Method 2: Disable WebRTC Entirely</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--disable-features=WebRTC&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>What this does:</strong></p>
<ul>
<li>Completely disables WebRTC API</li>
<li>No IP leaks possible</li>
<li><strong>Trade-off</strong>: Breaks all WebRTC-dependent sites (video conferencing, voice calls)</li>
</ul>
<p><strong>Method 3: Restrict WebRTC via Browser Preferences</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">options</span><span class="o">.</span><span class="n">browser_preferences</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="s1">&#39;webrtc&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>        <span class="s1">&#39;ip_handling_policy&#39;</span><span class="p">:</span> <span class="s1">&#39;disable_non_proxied_udp&#39;</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>        <span class="s1">&#39;multiple_routes_enabled&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>        <span class="s1">&#39;nonproxied_udp_enabled&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>        <span class="s1">&#39;allow_legacy_tls_protocols&#39;</span><span class="p">:</span> <span class="kc">False</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    <span class="p">}</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>What this does:</strong></p>
<ul>
<li><code>ip_handling_policy</code>: Same as Method 1, but via preferences</li>
<li><code>multiple_routes_enabled</code>: Prevents using multiple network paths</li>
<li><code>nonproxied_udp_enabled</code>: Blocks UDP that doesn't go through proxy</li>
</ul>
<p><strong>Method 4: Use SOCKS5 Proxy with UDP Support</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">options</span><span class="o">.</span><span class="n">set_proxy</span><span class="p">({</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="s1">&#39;server&#39;</span><span class="p">:</span> <span class="s1">&#39;socks5://proxy.example.com:1080&#39;</span><span class="p">,</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;pass&#39;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">})</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--force-webrtc-ip-handling-policy=default_public_interface_only&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>What this does:</strong></p>
<ul>
<li>SOCKS5 can proxy UDP (via <code>UDP ASSOCIATE</code> command)</li>
<li>WebRTC uses proxy for STUN queries</li>
<li><strong>Requires</strong>: Proxy must support UDP (not all SOCKS5 proxies do)</li>
</ul>
<h3 id="testing-for-webrtc-leaks">Testing for WebRTC Leaks</h3>
<p><strong>Manual Testing:</strong></p>
<ol>
<li>Visit <strong>https://browserleaks.com/webrtc</strong></li>
<li>Check "Public IP Address" section</li>
<li>If you see <strong>your real IP</strong> (not proxy IP), you're leaking</li>
</ol>
<p><strong>Automated Testing with Pydoll:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pydoll</span><span class="w"> </span><span class="kn">import</span> <span class="n">Chrome</span><span class="p">,</span> <span class="n">ChromiumOptions</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_webrtc_leak</span><span class="p">():</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    <span class="n">options</span> <span class="o">=</span> <span class="n">ChromiumOptions</span><span class="p">()</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="n">options</span><span class="o">.</span><span class="n">set_proxy</span><span class="p">({</span><span class="s1">&#39;server&#39;</span><span class="p">:</span> <span class="s1">&#39;http://proxy.example.com:8080&#39;</span><span class="p">})</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>    <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--force-webrtc-ip-handling-policy=disable_non_proxied_udp&#39;</span><span class="p">)</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="k">async</span> <span class="k">with</span> <span class="n">Chrome</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span> <span class="k">as</span> <span class="n">browser</span><span class="p">:</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        <span class="n">tab</span> <span class="o">=</span> <span class="k">await</span> <span class="n">browser</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        <span class="k">await</span> <span class="n">tab</span><span class="o">.</span><span class="n">go_to</span><span class="p">(</span><span class="s1">&#39;https://browserleaks.com/webrtc&#39;</span><span class="p">)</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        <span class="c1"># Wait for results to load</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="c1"># Extract detected IPs</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>        <span class="n">ips</span> <span class="o">=</span> <span class="k">await</span> <span class="n">tab</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="s1">            return Array.from(document.querySelectorAll(&#39;.ip-address&#39;))</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="s1">                .map(el =&gt; el.textContent.trim());</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Detected IPs:&quot;</span><span class="p">,</span> <span class="n">ips</span><span class="p">)</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>        <span class="c1"># Should only show proxy IP, not your real IP</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test_webrtc_leak</span><span class="p">())</span>
</span></code></pre></div>
<div class="admonition danger">
<p class="admonition-title">Always Test WebRTC Leaks</p>
<p><strong>Never assume</strong> your proxy configuration prevents WebRTC leaks. Always test with https://browserleaks.com/webrtc or https://ipleak.net to verify your real IP is not exposed.</p>
<p>Even a single WebRTC leak instantly <strong>compromises your entire proxy setup</strong>. Websites now know your real location, ISP, and network topology.</p>
</div>
<h3 id="advanced-webrtc-leak-detection-by-websites">Advanced: WebRTC Leak Detection by Websites</h3>
<p>Websites use JavaScript to intentionally trigger WebRTC and extract your real IP:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">// Malicious website code to extract real IP via WebRTC</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">RTCPeerConnection</span><span class="p">({</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nx">iceServers</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="nx">urls</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stun:stun.l.google.com:19302&#39;</span><span class="p">}]</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">});</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="nx">pc</span><span class="p">.</span><span class="nx">createDataChannel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Create dummy data channel</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="nx">pc</span><span class="p">.</span><span class="nx">createOffer</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">offer</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">pc</span><span class="p">.</span><span class="nx">setLocalDescription</span><span class="p">(</span><span class="nx">offer</span><span class="p">));</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="nx">pc</span><span class="p">.</span><span class="nx">onicecandidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">candidate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">ipRegex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/([0-9]{1,3}(\.[0-9]{1,3}){3})/</span><span class="p">;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">ipMatch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">ipRegex</span><span class="p">);</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">ipMatch</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">realIP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ipMatch</span><span class="p">[</span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">            </span><span class="c1">// Send real IP to server</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">            </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/track?real_ip=</span><span class="si">${</span><span class="nx">realIP</span><span class="si">}</span><span class="sb">&amp;proxy_ip=</span><span class="si">${</span><span class="nb">window</span><span class="p">.</span><span class="nx">clientIP</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="p">};</span>
</span></code></pre></div>
<p>This code:</p>
<ol>
<li>Creates an RTCPeerConnection (WebRTC connection object)</li>
<li>Triggers ICE candidate gathering (contacts STUN servers)</li>
<li>Extracts IP addresses from candidates with regex</li>
<li>Sends your real IP to their tracking server</li>
</ol>
<p><strong>Your defense:</strong> Disable WebRTC or force proxied-only routes as shown above.</p>
<h2 id="summary-and-further-reading">Summary and Further Reading</h2>
<p>Understanding network fundamentals (OSI layers, TCP/UDP characteristics, and WebRTC's peer-to-peer architecture) is <strong>essential</strong> for implementing effective proxy-based anonymity.</p>
<p><strong>Key Takeaways:</strong></p>
<ul>
<li>
<p>Proxies operate at <strong>specific layers</strong> (HTTP at Layer 7, SOCKS at Layer 5), determining their capabilities</p>
</li>
<li>
<p><strong>TCP fingerprints</strong> (window size, options, TTL) leak from lower layers, revealing your real OS</p>
</li>
<li>
<p><strong>UDP traffic</strong> (WebRTC, DNS) often bypasses proxies unless explicitly configured</p>
</li>
<li>
<p><strong>WebRTC</strong> is the #1 source of IP leakage. Always test with browserleaks.com</p>
</li>
<li>
<p>Only <strong>SOCKS5</strong> or <strong>VPN</strong> can proxy UDP traffic effectively</p>
</li>
</ul>
<p><strong>Next Steps:</strong></p>
<ul>
<li><strong><a href="../http-proxies/">HTTP/HTTPS Proxies</a></strong> - Dive into application-layer proxying</li>
<li><strong><a href="../socks-proxies/">SOCKS Proxies</a></strong> - Learn session-layer, protocol-agnostic proxying</li>
<li><strong><a href="../../fingerprinting/network-fingerprinting/">Network Fingerprinting</a></strong> - TCP/IP fingerprinting techniques</li>
<li><strong><a href="../../../features/configuration/proxy/">Proxy Configuration</a></strong> - Practical Pydoll proxy setup</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><strong>RFC 793</strong>: Transmission Control Protocol (TCP) - https://tools.ietf.org/html/rfc793</li>
<li><strong>RFC 768</strong>: User Datagram Protocol (UDP) - https://tools.ietf.org/html/rfc768</li>
<li><strong>RFC 5389</strong>: Session Traversal Utilities for NAT (STUN) - https://tools.ietf.org/html/rfc5389</li>
<li><strong>RFC 8445</strong>: Interactive Connectivity Establishment (ICE) - https://tools.ietf.org/html/rfc8445</li>
<li><strong>RFC 5766</strong>: Traversal Using Relays around NAT (TURN) - https://tools.ietf.org/html/rfc5766</li>
<li><strong>RFC 6528</strong>: Defending Against Sequence Number Attacks - https://tools.ietf.org/html/rfc6528</li>
<li><strong>W3C WebRTC 1.0</strong>: Real-Time Communication Between Browsers - https://www.w3.org/TR/webrtc/</li>
<li><strong>BrowserLeaks</strong>: WebRTC Leak Test - https://browserleaks.com/webrtc</li>
<li><strong>IPLeak</strong>: Comprehensive Leak Testing - https://ipleak.net</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.expand", "navigation.path", "navigation.top", "toc.follow", "content.code.copy", "content.code.select", "content.tooltips", "search.highlight", "search.suggest"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../resources/scripts/termynal.js"></script>
      
        <script src="../../../resources/scripts/extra.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.0.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>